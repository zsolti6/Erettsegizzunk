<Window 
    TextElement.Foreground="{DynamicResource MaterialDesign.Brush.Foreground}"
    Background="{DynamicResource MaterialDesignPaper}"
    TextElement.FontWeight="Medium"
    TextElement.FontSize="14"
    FontFamily="pack://application:,,,/MaterialDesignThemes.Wpf;component/Resources/Roboto/#Roboto"
    x:Class="ErettsegizzunkAdmin.Windows.FelhasznalokKezel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:ErettsegizzunkAdmin.Windows"
    mc:Ignorable="d"
    Title="Érettségizzünk"
    Width="1200" Height="800"
    WindowStartupLocation="CenterScreen"
    WindowState="Normal"
    MinHeight="400" MinWidth="600"
    WindowStyle="ToolWindow"
    ResizeMode="CanMinimize"
    Loaded="Window_Loaded">
    
    <Grid Background="{DynamicResource MaterialDesignPaper}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="4*" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- DataGrid -->
        <DataGrid x:Name="dgAdatok" AutoGenerateColumns="False" Margin="16" Grid.Row="0" Grid.RowSpan="2" CanUserAddRows="False" 
              RowBackground="{DynamicResource MaterialDesignPaper}" 
              AlternatingRowBackground="{DynamicResource MaterialDesignPaperLight}" 
              VerticalGridLinesBrush="{DynamicResource MaterialDesignDivider}" 
              HorizontalGridLinesBrush="{DynamicResource MaterialDesignDivider}" 
              BorderBrush="{DynamicResource PrimaryHueMidBrush}" 
              BorderThickness="1" 
              SelectionMode="Extended" 
              Style="{DynamicResource MaterialDesignDataGrid}">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="Kijelölés" Binding="{Binding IsSelected}" />
                <DataGridTextColumn Header="Id" Binding="{Binding Id}" IsReadOnly="True" />
                <DataGridTextColumn Header="Nev" Binding="{Binding LoginName}" IsReadOnly="False" />
                <DataGridTextColumn Header="Email" Binding="{Binding Email}" IsReadOnly="False" />
                <DataGridTemplateColumn Header="Jogosultság">
                    <!-- Mindig látható combobox -->
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding JogosultsagList}" 
                              SelectedItem="{Binding PermissionName, Mode=TwoWay}"
                              IsHitTestVisible="False"
                              Focusable="False"
                              Background="Transparent" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>

                    <!-- Kattintásra válzotatható combobox -->
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding JogosultsagList}" 
                              SelectedItem="{Binding PermissionName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              IsDropDownOpen="True" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridCheckBoxColumn Header="Aktív" Binding="{Binding Active}" IsReadOnly="False" />
                <DataGridCheckBoxColumn Header="Feliratkozva" Binding="{Binding Newsletter}" IsReadOnly="False" />
                <DataGridTextColumn Header="Profilkép" Binding="{Binding ProfilePicturePath}" IsReadOnly="False" />
                <DataGridTextColumn Header="Feliratkozás dátum" Binding="{Binding SignupDate}" IsReadOnly="True" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Side Panel -->
        <StackPanel Grid.Column="1" Grid.Row="1" Margin="16" VerticalAlignment="Top" HorizontalAlignment="Right">

            <Button x:Name="btnUj" 
            Content="Új felhasználó felvitele" 
            Style="{DynamicResource MaterialDesignRaisedButton}" 
            Width="200" 
            Margin="0,0,0,20" 
            Click="btnUj_Click"/>

            <CheckBox x:Name="cbSelectAll" 
                  Content="Összes kijelölése" 
                  Width="200" 
                  Margin="0,0,0,20" 
                  Style="{DynamicResource MaterialDesignCheckBox}" 
                  Checked="cbSelectAll_Checked" 
                  Unchecked="cbSelectAll_Unchecked" />

            <Button x:Name="btnTorol" 
            Content="Felhasználó törlése" 
            Style="{DynamicResource MaterialDesignRaisedButton}" 
            Background="{DynamicResource SecondaryHueMidBrush}" 
            Foreground="{DynamicResource MaterialDesignPaper}" 
            Width="200" 
            Margin="0,0,0,20" 
            Click="btnTorol_Click"/>
            

            <Button x:Name="btnVissza" 
            Content="Vissza" 
            Style="{DynamicResource MaterialDesignRaisedButton}" 
            Width="200" 
            Margin="0,0,0,20" 
            Click="btnVissza_Click"/>

            <Button x:Name="btnModosit" 
            Content="Módosítások elmentése" 
            Style="{DynamicResource MaterialDesignRaisedButton}" 
            Width="200" 
            Margin="0,0,0,20" 
            Click="btnModosit_Click"/>
        </StackPanel>

    </Grid>
</Window>
